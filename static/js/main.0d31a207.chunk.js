(this["webpackJsonpreact-start"]=this["webpackJsonpreact-start"]||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),i=n(26),r=n.n(i),o=n(5),c=n(11),l=n(10),u=n(58),h=n(8),d=n(9),m=n(18),p=n(17),k=function(){function e(){Object(h.a)(this,e)}return Object(d.a)(e,null,[{key:"ShiftZero",value:function(e){return e<10?"0"+e:e}},{key:"MakeMyDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.ShiftZero(e)+"-"+this.ShiftZero(t)+"-"+this.ShiftZero(n)}},{key:"MakeMyTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.ShiftZero(e)+":"+this.ShiftZero(t)+":"+this.ShiftZero(n)}},{key:"DateToMyTime",value:function(e){return this.MakeMyTime(e.getHours(),e.getMinutes(),e.getSeconds())}},{key:"DateToMyDate",value:function(e){return this.MakeMyDate(e.getDate(),e.getMonth()+1,e.getFullYear())}},{key:"DateToMyDateNamed",value:function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()-1].slice(0,3),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()].slice(0,3);return"".concat(n," ").concat(t," ").concat(e.getFullYear())}},{key:"MyDateAndMyTimeToDate",value:function(e,t){return e=e.split("-").reverse().join("-"),new Date(e+"T"+t)}},{key:"MyDateAndMyTimeUntilNow",value:function(e,t){var n=this.MyDateAndMyTimeToDate(e,t)-new Date,a=Math.sign(n),s=n;s=Math.abs(s);var i=Math.floor(s/36e5);s-=3600*i*1e3;var r=Math.floor(s/6e4);return s-=60*r*1e3,{ms:n,seconds:Math.floor(s/1e3)*a,minutes:r*a,hours:i*a}}}]),e}(),f=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).state={curDate:k.DateToMyDateNamed(new Date),curTime:k.DateToMyTime(new Date)},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.setState({curDate:k.DateToMyDateNamed(new Date)}),e.setState({curTime:k.DateToMyTime(new Date)})}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return s.a.createElement("header",{className:"header"},s.a.createElement("div",{className:"header--controls"},s.a.createElement("span",{className:"button",title:"Idk"},s.a.createElement(p.a,{icon:m.d})),s.a.createElement("span",{className:"button",title:"Settings",onClick:function(){e.props.onSettingsBtnClick()}},s.a.createElement(p.a,{icon:m.c}))),s.a.createElement("div",{className:"header--time"},s.a.createElement("span",{className:"time--date"},this.state.curDate),s.a.createElement("span",{className:"time--time"},this.state.curTime)))}}]),n}(s.a.Component),v=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={isExpanded:!1,swipe:null},a.OnMouseDownHandler=a.OnMouseDownHandler.bind(Object(o.a)(a)),a.OnMouseUpHandler=a.OnMouseUpHandler.bind(Object(o.a)(a)),a.OnMouseMoveHandler=a.OnMouseMoveHandler.bind(Object(o.a)(a)),a.OnMouseLeaveHandler=a.OnMouseLeaveHandler.bind(Object(o.a)(a)),a.TimeIconData=a.TimeIconData.bind(Object(o.a)(a)),a}return Object(d.a)(n,[{key:"OnMouseDownHandler",value:function(e){this.setState({swipe:{offset:0,last_x:e.screenX}})}},{key:"OnMouseLeaveHandler",value:function(e){this.setState({swipe:null})}},{key:"OnMouseUpHandler",value:function(e){if(this.state.swipe){var t=0===this.state.swipe.offset?!this.state.isExpanded:this.state.isExpanded;this.setState({swipe:null,isExpanded:t})}}},{key:"OnMouseMoveHandler",value:function(e){if(this.state.swipe){var t=this.state.swipe.last_x,n=this.state.swipe.offset+(e.screenX-t);Math.abs(n)>150?(this.props.onSwipe(this.props.task),this.setState({swipe:null})):this.setState({swipe:{offset:n,last_x:e.screenX}})}}},{key:"TimeUntilNow",value:function(e,t){return k.MyDateAndMyTimeToDate(e,t)-new Date}},{key:"TimeIconData",value:function(){var e=k.MyDateAndMyTimeUntilNow(this.props.task.date,this.props.task.time),t=e.hours?e.hours+" hours":"",n=e.minutes?e.minutes+" minutes":"",a="#00FF00";if(e.ms<0)a="#000000";else{var s=e.hours>1?"A0":"00";a="#"+(e.hours<=1?"FF":"00")+s+"00"}return{title:t+" "+n,color:a}}},{key:"render",value:function(){var e=this.state.isExpanded?"item-task__desc":"item-task__desc--hidden",t=this.state.swipe?{marginLeft:this.state.swipe.offset}:{},n=this.TimeIconData();return s.a.createElement("div",{style:t,className:"item-task",onMouseDown:this.OnMouseDownHandler,onMouseUp:this.OnMouseUpHandler,onMouseMove:this.OnMouseMoveHandler,onMouseLeave:this.OnMouseLeaveHandler},s.a.createElement("span",{className:"item-task__top"},s.a.createElement("span",{className:"item-task__name"},this.props.task.name),s.a.createElement(p.a,{className:"item-task__time-icon",title:n.title,icon:m.b,style:{color:n.color}})),s.a.createElement("span",{className:"item-task__date-time"},s.a.createElement("span",{className:"item-task__date"},this.props.task.date),s.a.createElement("span",{className:"item-task__time"},this.props.task.time)),s.a.createElement("span",{className:e},this.props.task.desc))}}]),n}(s.a.Component),b=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).OnItemSwipeHandler=a.OnItemSwipeHandler.bind(Object(o.a)(a)),a.OnMouseWheel=a.OnMouseWheel.bind(Object(o.a)(a)),a}return Object(d.a)(n,[{key:"OnItemSwipeHandler",value:function(e){this.props.onRemoveTask(e)}},{key:"OnMouseWheel",value:function(e){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{onWheel:this.OnMouseWheel,className:"inbox"},s.a.createElement("span",{className:"title"},"Inbox"),s.a.createElement("ol",{className:"list"},this.props.tasks.map((function(t){return s.a.createElement(v,{onSwipe:e.OnItemSwipeHandler,task:t,key:t.key})}))))}}]),n}(s.a.Component),y=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=m.e;return s.a.createElement("div",{className:"footer",style:{zIndex:"999999"}},s.a.createElement("span",{className:"button--left",title:"Back",style:{visibility:this.props.lBtn.isVisible?"visible":"hidden"},onClick:function(){e.props.lBtn.onClick()}},s.a.createElement(p.a,{icon:m.a})),s.a.createElement("span",{className:"button--right",title:"Add new task",style:{visibility:this.props.rBtn.isVisible?"visible":"hidden"},onClick:function(){e.props.rBtn.onClick()}},s.a.createElement(p.a,{icon:t})))}}]),n}(s.a.Component),g=n(59),S=n(60),O=n.n(S),M=(n(74),null),D=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state=a.DefaultState(),a.OnSubmitClickHandler=a.OnSubmitClickHandler.bind(Object(o.a)(a)),a.OnInputChangeHandler=a.OnInputChangeHandler.bind(Object(o.a)(a)),a.OnClearClickHandler=a.OnClearClickHandler.bind(Object(o.a)(a)),a.OnDatePickerChange=a.OnDatePickerChange.bind(Object(o.a)(a)),a}return Object(d.a)(n,[{key:"DefaultState",value:function(){return{name:"",desc:"",date:k.DateToMyDate(new Date),time:k.DateToMyTime(new Date).slice(0,-3)}}},{key:"OnClearClickHandler",value:function(){this.setState(this.DefaultState())}},{key:"componentWillUnmount",value:function(){void 0!==M&&(M={},Object.assign(M,this.state))}},{key:"componentDidMount",value:function(){M?this.setState(M):M=null}},{key:"OnInputChangeHandler",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"ValidateInputs",value:function(){return 0!==this.state.name.length||(alert("You must enter task name!"),!1)}},{key:"OnSubmitClickHandler",value:function(e){this.ValidateInputs()&&(this.props.onSubmitHandler({name:this.state.name,desc:this.state.desc,time:this.state.time,date:this.state.date}),M=void 0),e.preventDefault()}},{key:"OnDatePickerChange",value:function(e){this.setState({time:k.DateToMyTime(e).slice(0,-3),date:k.DateToMyDate(e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"screen--a-t"},s.a.createElement("span",{className:"title"},"Add new task"),s.a.createElement("form",null,s.a.createElement("label",null,s.a.createElement("span",{className:"label"},"Name:"),s.a.createElement("input",{name:"name",className:"input text-input",type:"text",value:this.state.name,placeholder:"Enter task name here",onChange:this.OnInputChangeHandler})),s.a.createElement("label",null,s.a.createElement("span",{className:"label"},"Description:"),s.a.createElement("textarea",{name:"desc",className:"input text-input",type:"text",value:this.state.desc,placeholder:"Enter task description here",onChange:this.OnInputChangeHandler})),s.a.createElement("label",null,s.a.createElement("span",{className:"label"},"Pick time:"),s.a.createElement(O.a,{className:"input text-input",onChange:this.OnDatePickerChange,selected:k.MyDateAndMyTimeToDate(this.state.date,this.state.time),value:this.state.date+" "+this.state.time,minDate:new Date,timeInputLabel:"Time:",timeFormat:"hh:mm",dateFormat:"dd/MM/yyyy",showTimeInput:!0})),s.a.createElement("input",{className:"button",title:"Add task",type:"submit",value:"Add",onClick:this.OnSubmitClickHandler}),s.a.createElement("input",{className:"button clear",title:"Clear fields",type:"button",value:"Clear",onClick:this.OnClearClickHandler})))}}]),n}(s.a.Component),C=n(63),T=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"OnCheckboxHandler",value:function(){this.props.onChange(this.props.index)}},{key:"render",value:function(){var e=this,t=this.props.item.isSupported?"item-setting":"item-setting item-setting--disabled";return s.a.createElement("div",{className:t,onClick:function(){e.OnCheckboxHandler.call(e)}},s.a.createElement("span",null,this.props.item.name),s.a.createElement("input",{type:"checkbox",checked:this.props.item.isAllowed,onChange:function(){}}))}}]),n}(s.a.Component),w=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={settings:a.props.settings.slice(0,a.props.settings.length)},a.OnSettingsChange=a.OnSettingsChange.bind(Object(o.a)(a)),a}return Object(d.a)(n,[{key:"OnSettingsChange",value:function(e){var t=Object(C.a)(this.state.settings);t[e].isAllowed=!t[e].isAllowed,this.setState({settings:t}),this.props.onSettingsChange(t)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"screen--settings"},s.a.createElement("span",{className:"title"},"Settings"),s.a.createElement("ol",{className:"list"},this.state.settings.map((function(t,n){return s.a.createElement(T,{key:n,index:n,item:t,onChange:e.OnSettingsChange})}))))}}]),n}(s.a.Component),j=function(){function e(){Object(h.a)(this,e),this.tasks=[]}return Object(d.a)(e,[{key:"GenerateTasks",value:function(){this.tasks=[];for(var e=0;e<5;++e)this.tasks.push({name:String(100+e+" test"),desc:e,time:"",date:""});function t(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function n(){var e=new Date,n=e.getHours()+1,a=e.getHours()+3;return k.MakeMyTime(t(n,a),t(0,59),0).slice(0,-3)}function a(){var e=new Date,n=[e.getDate(),e.getDate()+1],a=n[0],s=n[1];return k.MakeMyDate(t(a,s),e.getMonth()+1,e.getFullYear())}for(var s=0;s<this.tasks.length-2;++s){var i=this.tasks[s];i.time=n(),i.date=a(),i.isNotified=!1}for(var r=new Date,o=0;o<5;++o){var c=new Date;c.setMinutes(r.getMinutes()+o+1);var l=k.DateToMyTime(c).slice(0,-3);this.tasks.push({name:"Task "+(o+1),desc:"",time:l,date:"19-09-2020"})}for(var u=0;u<this.tasks.length;++u)this.tasks[u].key=u;this.SortTasks()}},{key:"SortTasks",value:function(){var e=function(e){return k.MyDateAndMyTimeToDate(e.date,e.time)-new Date},t=this.tasks.filter((function(t){return e(t)>0}));t.sort((function(t,n){return e(t)-e(n)}));var n=this.tasks.filter((function(t){return e(t)<=0}));n.sort((function(t,n){return e(n)-e(t)})),this.tasks=t.concat(n)}},{key:"AddTask",value:function(e){!function(t){var n=0;0!==t.length&&(n=t[0].key);var a,s=Object(u.a)(t);try{for(s.s();!(a=s.n()).done;){var i=a.value;n=Math.max(i.key,n)}}catch(r){s.e(r)}finally{s.f()}e.key=n+1}(this.tasks),this.tasks.push(e),this.SortTasks()}},{key:"RemoveTask",value:function(e){var t=this.tasks.indexOf(e);this.tasks.splice(t,1)}}]),e}(),E=function(){function e(t){var n=this;Object(h.a)(this,e),this.db=t,this.settings={isChanged:!1,items:[{name:"Notifications",isAllowed:!1,isSupported:!1},{name:"Sound",isAllowed:!0,isSupported:!1}]},this.RequestNotificationPermission=this.RequestNotificationPermission.bind(this),this.RequestNotificationPermission(),this.settings.items[1].isSupported=void 0!==Audio,this.notification_interval=setInterval((function(){n.db.SortTasks()}),5e3)}return Object(d.a)(e,[{key:"RequestNotificationPermission",value:function(){var e=this,t=void 0!==Notification;this.settings.items[0].isSupported=t,t&&Notification.requestPermission().then((function(){e.settings.items[0].isAllowed="granted"===Notification.permission})).catch((function(){e.settings.items[0].isAllowed=!1}))}},{key:"ShowNotifications",value:function(){if(this.settings.items[0].isSupported&&this.settings.items[0].isAllowed){var e=this.db.tasks.find((function(e){return k.MyDateAndMyTimeUntilNow(e.date,e.time).ms<0&&!e.isNotified}));if(e)new Notification(e.name,{body:e.desc}).onclick=function(e){}}this.db.tasks.forEach((function(e){k.MyDateAndMyTimeUntilNow(e.date,e.time).ms<0&&(e.isNotified=!0)})),this.db.SortTasks()}},{key:"OnSettingsChange",value:function(e){this.settings.isChanged=!0,!this.settings.items[0].isAllowed&&e[0].isAllowed&&this.RequestNotificationPermission(),this.settings.items[1].isAllowed=e[1].isAllowed}}]),e}(),H=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).db=new j,e.logic=new E(e.db),e.state={},e.Screens={AddTask:0,Settings:1,Inbox:2},Object.freeze(e.Screens),e.HeaderSettingsBtnHandler=e.HeaderSettingsBtnHandler.bind(Object(o.a)(e)),e.FooterRBtnHandler=e.FooterRBtnHandler.bind(Object(o.a)(e)),e.FooterLBtnHandler=e.FooterLBtnHandler.bind(Object(o.a)(e)),e.InboxRemoveTaskHandler=e.InboxRemoveTaskHandler.bind(Object(o.a)(e)),e.AddTaskSubmitHandler=e.AddTaskSubmitHandler.bind(Object(o.a)(e)),e.OnSettingsChange=e.OnSettingsChange.bind(Object(o.a)(e)),e.state.screen_stack=[e.Screens.Inbox],e.CurrentScreen=e.CurrentScreen.bind(Object(o.a)(e)),e.PushScreen=e.PushScreen.bind(Object(o.a)(e)),e.PopScreen=e.PopScreen.bind(Object(o.a)(e)),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.notification_interval=setInterval((function(){e.logic.ShowNotifications(),e.forceUpdate()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.notification_interval)}},{key:"InboxRemoveTaskHandler",value:function(e){this.db.RemoveTask(e),this.setState(this)}},{key:"AddTaskSubmitHandler",value:function(e){this.db.AddTask(e),this.PopScreen()}},{key:"CurrentScreen",value:function(){return this.state.screen_stack[this.state.screen_stack.length-1]}},{key:"PushScreen",value:function(e){this.state.screen_stack.push(e),this.setState({screen_stack:this.state.screen_stack})}},{key:"PopScreen",value:function(){this.state.screen_stack.pop(),this.setState({screen_stack:this.state.screen_stack})}},{key:"HeaderSettingsBtnHandler",value:function(){this.CurrentScreen()!==this.Screens.Settings&&(this.logic.settings.isChanged=!1,this.PushScreen(this.Screens.Settings))}},{key:"FooterRBtnHandler",value:function(){this.CurrentScreen()===this.Screens.Inbox?this.PushScreen(this.Screens.AddTask):this.CurrentScreen()===this.Screens.Settings&&this.PopScreen()}},{key:"FooterLBtnHandler",value:function(){this.CurrentScreen()!==this.Screens.Inbox&&this.PopScreen()}},{key:"OnSettingsChange",value:function(e){this.logic.OnSettingsChange(e),this.forceUpdate()}},{key:"render",value:function(){var e=function(){switch(this.CurrentScreen()){case this.Screens.AddTask:return s.a.createElement(D,{onSubmitHandler:this.AddTaskSubmitHandler});case this.Screens.Settings:return s.a.createElement(w,{settings:this.logic.settings.items,onSettingsChange:this.OnSettingsChange});case this.Screens.Inbox:return s.a.createElement(b,{tasks:this.db.tasks,onRemoveTask:this.InboxRemoveTaskHandler})}}.call(this);var t={onClick:this.FooterRBtnHandler,isVisible:function(){if(this.CurrentScreen()===this.Screens.Inbox)return!0}.call(this)};return s.a.createElement("div",{className:"todo"},s.a.createElement(f,{onSettingsBtnClick:this.HeaderSettingsBtnHandler}),e,s.a.createElement(y,{rBtn:t,lBtn:{onClick:this.FooterLBtnHandler,isVisible:this.CurrentScreen()!==this.Screens.Inbox}}))}}]),n}(s.a.Component);n(131);r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(H,null)),document.getElementById("root"))},64:function(e,t,n){e.exports=n(132)}},[[64,1,2]]]);
//# sourceMappingURL=main.0d31a207.chunk.js.map